
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="idk">
      
      
        <meta name="author" content="AnjaReese">
      
      
        <link rel="canonical" href="https://anjareese.github.io/mymkdocs/CSZJU/SYS2/homework/3220103784-HW2/">
      
      
      
      
      <link rel="icon" href="../../../../assets/img/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.31">
    
    
      
        <title>3220103784 HW2 - Anya's Adventure</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.3cba04c6.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://cdn.tonycrane.cc/utils/katex.min.css">
    
      <link rel="stylesheet" href="https://cdn.tonycrane.cc/jbmono/jetbrainsmono.css">
    
      <link rel="stylesheet" href="https://cdn.tonycrane.cc/lxgw/lxgwscreen.css">
    
      <link rel="stylesheet" href="../../../../css/tasklist.css">
    
      <link rel="stylesheet" href="../../../../css/custom.css">
    
      <link rel="stylesheet" href="../../../../css/card.css">
    
      <link rel="stylesheet" href="../../../../css/flink.css">
    
      <link rel="stylesheet" href="../../../../css/changelog_extra.css">
    
      <link rel="stylesheet" href="../../../../css/counter.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#1-question-1-pipeline-design-concept" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
  
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../../.." title="Anya&#39;s Adventure" class="md-header__button md-logo" aria-label="Anya's Adventure" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Anya's Adventure
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              3220103784 HW2
            
          </span>
        </div>
      </div>
    </div>
    <div class="md-header__options">
      <div class="md-header-nav__scheme md-header-nav__button md-source__icon md-icon">
          <a
            href="javascript:toggleScheme();"
            title="Light mode"
            class="light-mode"
          >
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
          </a>
          <a
            href="javascript:toggleScheme();"
            title="Dark mode"
            class="dark-mode"
          >
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
          </a>
          <a
            href="javascript:toggleScheme();"
            title="System preference"
            class="system-mode"
          >
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.5 2c-1.79 1.15-3 3.18-3 5.5s1.21 4.35 3.03 5.5C4.46 13 2 10.54 2 7.5A5.5 5.5 0 0 1 7.5 2m11.57 1.5 1.43 1.43L4.93 20.5 3.5 19.07 19.07 3.5m-6.18 2.43L11.41 5 9.97 6l.42-1.7L9 3.24l1.75-.12.58-1.65L12 3.1l1.73.03-1.35 1.13.51 1.67m-3.3 3.61-1.16-.73-1.12.78.34-1.32-1.09-.83 1.36-.09.45-1.29.51 1.27 1.36.03-1.05.87.4 1.31M19 13.5a5.5 5.5 0 0 1-5.5 5.5c-1.22 0-2.35-.4-3.26-1.07l7.69-7.69c.67.91 1.07 2.04 1.07 3.26m-4.4 6.58 2.77-1.15-.24 3.35-2.53-2.2m4.33-2.7 1.15-2.77 2.2 2.54-3.35.23m1.15-4.96-1.14-2.78 3.34.24-2.2 2.54M9.63 18.93l2.77 1.15-2.53 2.19-.24-3.34Z"/></svg>
          </a>
           <a
            href="javascript:toggleScheme();"
            title="Unknown scheme"
            class="unknown-mode"
          >
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m15.07 11.25-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 0 0-2-2 2 2 0 0 0-2 2H8a4 4 0 0 1 4-4 4 4 0 0 1 4 4 3.2 3.2 0 0 1-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10c0-5.53-4.5-10-10-10Z"/></svg>
          </a>
      </div>
    </div>
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../.." class="md-tabs__link">
          
  
    
  
  Hi There

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../FDS/Notes/0.Overview/" class="md-tabs__link">
          
  
    
  
  ZJU Course

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../CSCourse/CS61B/CS61B%201/" class="md-tabs__link">
          
  
    
  
  CS Courses

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../Misc/%E5%A4%87%E5%BF%98/" class="md-tabs__link">
          
  
    
  
  备忘

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../bucket_list/" class="md-tabs__link">
          
  
    
  
  Me the Weirdo being Weird

        </a>
      </li>
    
  

    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
  <script src="../../../../js/scheme.js" type="text/javascript"></script>

    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="Anya&#39;s Adventure" class="md-nav__button md-logo" aria-label="Anya's Adventure" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Anya's Adventure
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../.." class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Hi There
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../../../FDS/Notes/0.Overview/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ZJU Course
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../../../../CSCourse/CS61B/CS61B%201/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    CS Courses
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../../Misc/%E5%A4%87%E5%BF%98/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    备忘
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../../../../bucket_list/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Me the Weirdo being Weird
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-question-1-pipeline-design-concept" class="md-nav__link">
    <span class="md-ellipsis">
      1 Question 1: Pipeline Design Concept
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1 Question 1: Pipeline Design Concept">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-a" class="md-nav__link">
    <span class="md-ellipsis">
      1.1 A
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-b" class="md-nav__link">
    <span class="md-ellipsis">
      1.2 B
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-c" class="md-nav__link">
    <span class="md-ellipsis">
      1.3 C
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-question-2-data-hazard-and-forwarding-35-points" class="md-nav__link">
    <span class="md-ellipsis">
      2 Question 2: Data Hazard and Forwarding (35 points)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2 Question 2: Data Hazard and Forwarding (35 points)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-a" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 A
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-b" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 B
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-c" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 C
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-question-3-control-hazard-and-branch-prediction-30-points" class="md-nav__link">
    <span class="md-ellipsis">
      3 Question 3: Control Hazard and Branch Prediction (30 points)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3 Question 3: Control Hazard and Branch Prediction (30 points)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-a" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 A
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-b" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 B
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-c" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 C
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>3220103784 HW2</h1>

<h2 id="1-question-1-pipeline-design-concept">1 Question 1: Pipeline Design Concept<a class="headerlink" href="#1-question-1-pipeline-design-concept" title="Permanent link">&para;</a></h2>
<h3 id="11-a">1.1 A<a class="headerlink" href="#11-a" title="Permanent link">&para;</a></h3>
<p>(a) Answer the following choice questions about pipelined processor design. (2 points each)</p>
<p>![[sys2hw2quesapic.png]]</p>
<ul>
<li>Pipelining improves the [A] throughput of instructions. </li>
<li>A single-cycle implementation violates the great idea of making the common case fast. [A] True</li>
<li>A longer instruction pipeline is usually associated with higher clock speeds.  [A] True</li>
<li>Deeper pipelines with more stages can degrade execution performance. [A] True.</li>
<li>If the instruction <code>add x4, x1, x0</code> is inserted after <code>ld x1, 100(x4)</code>, then the last instruction in the pipeline starts execution at time [B] 800ps (assuming all forwarding is implemented).</li>
</ul>
<h3 id="12-b">1.2 B<a class="headerlink" href="#12-b" title="Permanent link">&para;</a></h3>
<p>(b) Assume that the critical path in Instruction fetch takes 100ps, Reading or Writing Registers takes 100ps, ALU Computing takes 30ps, Data Access takes 500ps. Compute the minimum clock period achievable for the single-cycle and the pipelined design. How much speedup do you achieve over the single-cycle design?(10 points)</p>
<ul>
<li>IF: 100ps</li>
<li>ID: 100ps</li>
<li>EXE: 30ps</li>
<li>MEM: 500ps</li>
<li>WB: 100ps</li>
</ul>
<p><span class="arithmatex">\(Clock_{Pipeline} = 5 \times Clock_{MEM} = 2500ps\)</span></p>
<p><span class="arithmatex">\(Time\ Per\ Inst_{Pipeline} = 5 \times Clock_{Pipeline} = 2500ps\)</span> </p>
<p>理想状况下同时可以跑5条指令</p>
<p><span class="arithmatex">\(Clock_{single} = \Sigma^5_{i = 1}C_i = 830ps\)</span></p>
<div class="arithmatex">\[
Speed Up = \frac{Clock_{single}}{Clock_{Pipeline}} = \frac{830ps}{500ps} = 1.66
\]</div>
<h3 id="13-c">1.3 C<a class="headerlink" href="#13-c" title="Permanent link">&para;</a></h3>
<p>(c) Based on the critical path in (b), if we want to turn the five-stage into four-stage, which two stages will you merget together to achieve the best performance ? Explain it and compute the speedup again.(you can use stage name IF/ID/EX/MEM/WB) (15 points)</p>
<p>ID EXE 接近，且 EXE 做的事情最少，只需要 30ps，将 ID 和 EXE 阶段合并</p>
<ul>
<li>IF: 100ps</li>
<li>IDEXE: 130ps</li>
<li>MEM: 500ps</li>
<li>WB: 100ps</li>
</ul>
<p><span class="arithmatex">\(Time\ Per\ Inst_{Pipeline} = 4 \times Clock_{Pipeline} = 2000ps\)</span> </p>
<p><span class="arithmatex">\(Clock_{Pipeline} = \frac{TimePerInst}{Insts} = 500ps\)</span></p>
<div class="arithmatex">\[
Speed Up = \frac{Clock_{single}}{Clock_{Pipeline}} = \frac{830ps}{500ps} = 1.66
\]</div>
<h2 id="2-question-2-data-hazard-and-forwarding-35-points">2 Question 2: Data Hazard and Forwarding (35 points)<a class="headerlink" href="#2-question-2-data-hazard-and-forwarding-35-points" title="Permanent link">&para;</a></h2>
<p>![[sys2hw2ques2cpupic.png]]</p>
<h3 id="21-a">2.1 A<a class="headerlink" href="#21-a" title="Permanent link">&para;</a></h3>
<p>(a) For the following sequence of instructions, insert NOPs to ensure correct execution if there is no forwarding and hazard detection. Change and rearrange the origin code to minimize the number of NOPs needed and give its space time diagram .(Assume register x17 can be used as temporary register)(15 points)</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>add x15, x12, x11
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>ld  x13, 4(x15)
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>ld  x12, 0(x2)
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>or  x13, x15, x13
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>sd  x13, 0(x15)
</code></pre></div>
<p>After inserting NOPs: 根据数据冲突插入 NOP 指令。由于 reg 下降沿写入，所以 WB 阶段的数据冲突不考虑，需要 5 条。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>add x15, x12, x11
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>NOP
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>NOP
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>ld  x13, 4(x15)
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>ld  x12, 0(x2)
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>NOP
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>or  x13, x15, x13
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>NOP
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>NOP
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>sd  x13, 0(x15)
</code></pre></div>
<p>Space-Time-Diagram:</p>
<p>![[sys2hw2insts.png]]</p>
<h3 id="22-b">2.2 B<a class="headerlink" href="#22-b" title="Permanent link">&para;</a></h3>
<p>(b) Only considering the RAW(read after write)(see more in Note 2) data hazard, we have the count of forwarding instructions as Table 1. Under different situations, the execution time of different stages are shown as Table 2. What percent of cycles are stalls when running on a CPU with full forwarding? Explain why Why “MEM to 1st and MEM to 2nd” is not an entry in Table 1.(assume there are no any control transfer instructions)(10points)</p>
<p>![[sys2hw2tables.png]]</p>
<p>对于全面使用 forwarding 的 CPU 来说，“MEM to 1st” 会 stall 一个 clk。所以 stall 的百分比是 <span class="arithmatex">\(0.2 / 1.2 = 16.7\%\)</span></p>
<p>没有 “MEM to 1st" 和 "MEM to 2nd” 的情况，在题目所设计的五级流⽔线中，由于 WB 阶段的 Reg 下降沿写回，所以 ld 指令的数据 forward 只需要在 MEM/WB 阶段 Forwarding。等到下⼀个 clk 时 MEM 中读出的数据已经在时钟下降沿写回寄存器，不需要前递了。</p>
<h3 id="23-c">2.3 C<a class="headerlink" href="#23-c" title="Permanent link">&para;</a></h3>
<p>(c) Based on the two tables above, note the two three-input forwarding Mux in EX stage before the ALU and assume we only have the two-input multiplexors. Whether it’s better to forward only from the EX/MEM pipeline register or only from the MEM/WB pipeline register? Compute their CPI resectively.(10 points)</p>
<ol>
<li>如果仅仅在 EXE/MEM 阶段 forwarding，需要的 stall 如下：</li>
</ol>
<table>
<thead>
<tr>
<th>Insts</th>
<th>Stalls</th>
</tr>
</thead>
<tbody>
<tr>
<td>EX to 1st only</td>
<td>0</td>
</tr>
<tr>
<td>EX to 2nd only</td>
<td>1</td>
</tr>
<tr>
<td>MEM to 1st only</td>
<td>2</td>
</tr>
<tr>
<td>MEM to 2nd only</td>
<td>1</td>
</tr>
<tr>
<td>EX to 1st and EX to 2nd</td>
<td>1</td>
</tr>
</tbody>
</table>
<div class="arithmatex">\[
CPI = 1 + 0.05\times1+0.2\times2+0.05\times1+0.1\times1+0.1\times1 = 1.65
\]</div>
<ol start="2">
<li>如果仅仅在 MEM/WB 阶段 forwarding，需要的 stall 如下：</li>
</ol>
<table>
<thead>
<tr>
<th>Insts</th>
<th>Stalls</th>
</tr>
</thead>
<tbody>
<tr>
<td>EX to 1st only</td>
<td>1</td>
</tr>
<tr>
<td>EX to 2nd only</td>
<td>0</td>
</tr>
<tr>
<td>MEM to 1st only</td>
<td>1</td>
</tr>
<tr>
<td>MEM to 2nd only</td>
<td>0</td>
</tr>
<tr>
<td>EX to 1st and EX to 2nd</td>
<td>1</td>
</tr>
</tbody>
</table>
<div class="arithmatex">\[
CPI = 1 + 0.05\times1+0.2\times1+0.05\times0+0.1\times0+0.1\times1 = 1.35
\]</div>
<h2 id="3-question-3-control-hazard-and-branch-prediction-30-points">3 Question 3: Control Hazard and Branch Prediction (30 points)<a class="headerlink" href="#3-question-3-control-hazard-and-branch-prediction-30-points" title="Permanent link">&para;</a></h2>
<h3 id="31-a">3.1 A<a class="headerlink" href="#31-a" title="Permanent link">&para;</a></h3>
<p>(a) For all conditional branch instructions, we use static prediction strategies of always-taken and always- not-taken respectively. Which of these two policies is more accurate for the following code in C (translate the code into RV32I first and assume the array A has already been written in memory from address 0x800000 and the variable a is saved in register t0)? (10 points)</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kt">int</span><span class="w"> </span><span class="n">A</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">}</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">        </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">        </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="p">}</span>
</code></pre></div>
<p>转化成 Assembly</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>    addi t1, x0, 5
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>    addi t3, x0, 6
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>loop_start:
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>    beq  t1, t3, end # loop_end branch 1, not branch 5
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>    lw   a0, 0(a5)
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>    bge  a0, t2, else # if_else branch 2, not branch 4
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>    addi t0, t0, 1 # a = a+1
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>    jal  for_end
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>else:
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>    addi t0, t0, 2 # a = a+2
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>for_end:
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>    addi a5, a5, 4
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a>    addi t1, t1, 1
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a>    jal  loop_start
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a>
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a>loop_end:
</code></pre></div>
<ol>
<li>
<p>Alway-Taken
共 12 次分支跳转，判断错误 9 次，判断正确 12 次</p>
</li>
<li>
<p>Always-not-Taken
共 12 次分支跳转，判断错误 3 次，判断正确 9 次</p>
</li>
</ol>
<h3 id="32-b">3.2 B<a class="headerlink" href="#32-b" title="Permanent link">&para;</a></h3>
<p>(b) The most classical implementation of the dynamic prediction is the Bimodal Predictor(see Note3 for more). It uses a branch history table to record previous branch taken states(counter) for different entries(usually mapped from lower n bit of the instruction’s address). So assume we have a branch history table with <strong>8 entries</strong> and the starting address of your code is <strong>0x0</strong>, <strong>fill in the blank</strong> of the history table(Table 3) initialized by 0. <strong>Compare the performance with static branch prediction in (a)</strong>. If better, explain it. If worse, suggest some method of improvement under the dynamic prediction. (10 points)</p>
<blockquote>
<p>[!Note] Iteration is indicated by variable i. In each iteration the counter may change for many times, just write it like 00→01→10.</p>
</blockquote>
<p>定义 Strongly Taken as 00, Weakly Taken as 01, Weakly Not Taken as 10, Strongly Not Taken as 11。</p>
<p>entry 0: <code>beq  t1, t3, end # loop_end branch 1, not branch 5</code></p>
<p>entry 1: <code>bge  a0, t2, else # if_else branch 2, not branch 4</code></p>
<p>黑色表示预测正确，红色表示预测错误。</p>
<p>![[Pasted image 20231110061045.png]]</p>
<p>动态预测相对于静态预测有更好的性能，原因如下：</p>
<ol>
<li>动态预测可以根据先前的分支历史信息进行预测。它们保留了分支执行的历史记录，并根据历史数据来调整预测结果。而静态预测器仅基于固定的规则或模式进行预测，无法适应不同分支的变化。</li>
<li>动态预测可以根据不同的程序和分支模式进行自适应调整。它们可以根据当前程序的运行时行为和分支指令的特性来调整预测策略。这种适应性使得动态预测器可以更准确地预测分支的方向，尤其是在存在复杂的分支模式和动态行为的情况下。</li>
</ol>
<h3 id="33-c">3.3 C<a class="headerlink" href="#33-c" title="Permanent link">&para;</a></h3>
<p>(c) In Figure 5, we move the branch test to ID stage with two main changes in the logic circuit: an adder in ID stage as one choice of PC, an equal test after the registers. However, if we move the equal test ahead in ID stage, it will raise extra data hazards. Assume we try to deal this by forwarding, please design the circuit again(add a forwarding unit to ID stage and its corresponding lines). (4 points) Note: 3 type of circumstances should be considered, please fill the Table 4. If the source operand is no need to be forwarded, leave the cell blank, otherwise, write the stage it is forwarded from. (6 points)</p>
<p>代码实现：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="w">    </span><span class="n">forwarding</span><span class="w"> </span><span class="n">forwarding</span><span class="p">(</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">        </span><span class="p">.</span><span class="n">we_reg_wb</span><span class="p">(</span><span class="n">decode_wb</span><span class="p">[</span><span class="mh">21</span><span class="p">]),</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">        </span><span class="p">.</span><span class="n">we_reg_mem</span><span class="p">(</span><span class="n">decode_mem</span><span class="p">[</span><span class="mh">21</span><span class="p">]),</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">        </span><span class="p">.</span><span class="n">we_reg_exe</span><span class="p">(</span><span class="n">decode_exe</span><span class="p">[</span><span class="mh">21</span><span class="p">]),</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">        </span><span class="p">.</span><span class="n">rd_wb</span><span class="p">(</span><span class="n">inst_wb</span><span class="p">[</span><span class="mh">11</span><span class="o">:</span><span class="mh">7</span><span class="p">]),</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">        </span><span class="p">.</span><span class="n">rd_mem</span><span class="p">(</span><span class="n">inst_mem</span><span class="p">[</span><span class="mh">11</span><span class="o">:</span><span class="mh">7</span><span class="p">]),</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">        </span><span class="p">.</span><span class="n">rd_exe</span><span class="p">(</span><span class="n">inst_exe</span><span class="p">[</span><span class="mh">11</span><span class="o">:</span><span class="mh">7</span><span class="p">]),</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="w">        </span><span class="p">.</span><span class="n">alu_out_exe</span><span class="p">(</span><span class="n">alu_out_exe</span><span class="p">),</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="w">        </span><span class="p">.</span><span class="n">alu_out_wb</span><span class="p">(</span><span class="n">alu_out_wb</span><span class="p">),</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="w">        </span><span class="p">.</span><span class="n">alu_out_mem</span><span class="p">(</span><span class="n">alu_out_mem</span><span class="p">),</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="w">        </span><span class="p">.</span><span class="n">rs1_id</span><span class="p">(</span><span class="n">inst_id</span><span class="p">[</span><span class="mh">19</span><span class="o">:</span><span class="mh">15</span><span class="p">]),</span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="w">        </span><span class="p">.</span><span class="n">rs2_id</span><span class="p">(</span><span class="n">inst_id</span><span class="p">[</span><span class="mh">24</span><span class="o">:</span><span class="mh">20</span><span class="p">]),</span>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="w">        </span><span class="p">.</span><span class="n">immgen_op</span><span class="p">(</span><span class="n">decode_id</span><span class="p">[</span><span class="mh">18</span><span class="o">:</span><span class="mh">16</span><span class="p">]),</span><span class="w"> </span><span class="c1">// decode[18:16]</span>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="w">        </span><span class="p">.</span><span class="n">forwardA</span><span class="p">(</span><span class="n">forwardA</span><span class="p">),</span>
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="w">        </span><span class="p">.</span><span class="n">forwardB</span><span class="p">(</span><span class="n">forwardB</span><span class="p">)</span>
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a><span class="w">    </span><span class="p">);</span>
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a>
<a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a><span class="w">    </span><span class="n">Mux4</span><span class="w"> </span><span class="n">forwardA_mux</span><span class="p">(</span>
<a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a><span class="w">        </span><span class="p">.</span><span class="n">I0</span><span class="p">(</span><span class="n">read_data_1_id</span><span class="p">),</span>
<a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a><span class="w">        </span><span class="p">.</span><span class="n">I1</span><span class="p">(</span><span class="n">decode_wb</span><span class="p">[</span><span class="mh">4</span><span class="p">]</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">trdata_wb</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">alu_out_wb</span><span class="p">),</span><span class="w"> </span><span class="c1">// decode[4] decide the reg read from memory or write back</span>
<a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a><span class="w">        </span><span class="p">.</span><span class="n">I2</span><span class="p">(</span><span class="n">decode_mem</span><span class="p">[</span><span class="mh">4</span><span class="p">]</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">trdata_mem</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">alu_out_mem</span><span class="p">),</span>
<a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a><span class="w">        </span><span class="p">.</span><span class="n">I3</span><span class="p">(</span><span class="n">decode_exe</span><span class="p">[</span><span class="mh">4</span><span class="p">]</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">trdata_exe</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">alu_out_exe</span><span class="p">),</span>
<a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a><span class="w">        </span><span class="p">.</span><span class="n">s</span><span class="p">(</span><span class="n">forwardA</span><span class="p">),</span>
<a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a><span class="w">        </span><span class="p">.</span><span class="n">o</span><span class="p">(</span><span class="n">real_data1_id</span><span class="p">)</span>
<a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a><span class="w">    </span><span class="p">);</span>
<a id="__codelineno-4-27" name="__codelineno-4-27" href="#__codelineno-4-27"></a>
<a id="__codelineno-4-28" name="__codelineno-4-28" href="#__codelineno-4-28"></a><span class="w">    </span><span class="n">Mux4</span><span class="w"> </span><span class="n">forwardB_mux</span><span class="p">(</span>
<a id="__codelineno-4-29" name="__codelineno-4-29" href="#__codelineno-4-29"></a><span class="w">        </span><span class="p">.</span><span class="n">I0</span><span class="p">(</span><span class="n">read_data_2_id</span><span class="p">),</span>
<a id="__codelineno-4-30" name="__codelineno-4-30" href="#__codelineno-4-30"></a><span class="w">        </span><span class="p">.</span><span class="n">I1</span><span class="p">(</span><span class="n">decode_wb</span><span class="p">[</span><span class="mh">4</span><span class="p">]</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">trdata_wb</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">alu_out_wb</span><span class="p">),</span>
<a id="__codelineno-4-31" name="__codelineno-4-31" href="#__codelineno-4-31"></a><span class="w">        </span><span class="p">.</span><span class="n">I2</span><span class="p">(</span><span class="n">decode_mem</span><span class="p">[</span><span class="mh">4</span><span class="p">]</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">trdata_mem</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">alu_out_mem</span><span class="p">),</span>
<a id="__codelineno-4-32" name="__codelineno-4-32" href="#__codelineno-4-32"></a><span class="w">        </span><span class="p">.</span><span class="n">I3</span><span class="p">(</span><span class="n">decode_exe</span><span class="p">[</span><span class="mh">4</span><span class="p">]</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">trdata_exe</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">alu_out_exe</span><span class="p">),</span>
<a id="__codelineno-4-33" name="__codelineno-4-33" href="#__codelineno-4-33"></a><span class="w">        </span><span class="p">.</span><span class="n">s</span><span class="p">(</span><span class="n">forwardB</span><span class="p">),</span>
<a id="__codelineno-4-34" name="__codelineno-4-34" href="#__codelineno-4-34"></a><span class="w">        </span><span class="p">.</span><span class="n">o</span><span class="p">(</span><span class="n">real_data2_id</span><span class="p">)</span>
<a id="__codelineno-4-35" name="__codelineno-4-35" href="#__codelineno-4-35"></a><span class="w">    </span><span class="p">);</span>
</code></pre></div>
<p>Stall Cycles</p>
<p>![[Pasted image 20231110063112.png]]</p>












  <script src="https://giscus.app/client.js"
  data-repo="AnjaReese/AnjaReese.github.io"
  data-repo-id="R_kgDOKwmQmQ"
  data-category="Show and tell"
  data-category-id="DIC_kwDOKwmQmc4Cbla-"
  data-mapping="pathname"
  data-strict="0"
  data-reactions-enabled="1"
  data-emit-metadata="0"
  data-input-position="bottom"
  data-theme="light_protanopia"
  data-lang="en"
  crossorigin="anonymous"
  async>
  </script>
  <script>
    if (document.querySelector("body").getAttribute("data-md-color-scheme") === "slate") {
      var giscus = document.querySelector("script[src*=giscus]")
      giscus.setAttribute("data-theme", "https://gcore.jsdelivr.net/gh/TonyCrane/lab-hypotensor/docs/css/giscus.css") 
    }
  </script>

                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      AnjaReese
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/AnyaReese/" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.expand", "navigation.indexes", "toc.follow", "navigation.top", "search.suggest", "search.highlight", "search.share", "header.autohide", "announce.dismiss", "navigation.prune", "content.code.annotate", "content.code.copy"], "search": "../../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
        <script src="https://cdn.tonycrane.cc/utils/katex.min.js"></script>
      
        <script src="../../../../js/katex.js"></script>
      
    
  </body>
</html>